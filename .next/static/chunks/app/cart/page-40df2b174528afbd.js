(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5],{140:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var r=t(5155),a=t(2115),l=t(4901),c=t(9111),n=t(5125),i=t(2663);let d=()=>{let{currency:e,router:s,getCartCount:t,getCartAmount:l,getToken:d,user:o,cartItems:x,setCartItems:m}=(0,c.U)(),[h,u]=(0,a.useState)(null),[p,j]=(0,a.useState)(!1),[g,b]=(0,a.useState)([]),y=async()=>{try{let e=await d(),{data:s}=await n.A.get("/api/user/get-address",{headers:{Authorization:"Bearer ".concat(e)}});s.success?(b(s.addresses),s.addresses.length>0&&u(s.addresses[0])):i.Ay.error(s.message)}catch(e){i.Ay.error(e.message)}},f=async()=>{try{if(!o)return(0,i.Ay)("Please login to place order",{icon:"⚠️"});if(!h)return i.Ay.error("Please select an address");let e=Object.keys(x).map(e=>({product:e,quantity:x[e]}));if(e=e.filter(e=>e.quantity>0),0===e.length)return i.Ay.error("Cart is empty");let t=await d(),{data:r}=await n.A.post("/api/order/create",{address:h._id,items:e},{headers:{Authorization:"Bearer ".concat(t)}});r.success?(i.Ay.success(r.message),m({}),s.push("/order-placed")):i.Ay.error(r.message)}catch(e){i.Ay.error(e.message)}};return(0,a.useEffect)(()=>{o&&y()},[o]),(0,r.jsxs)("div",{className:"w-full md:w-96 bg-gray-500/5 p-5",children:[(0,r.jsx)("h2",{className:"text-xl md:text-2xl font-medium text-gray-700",children:"Order Summary"}),(0,r.jsx)("hr",{className:"border-gray-500/30 my-5"}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-base font-medium uppercase text-gray-600 block mb-2",children:"Select Address"}),(0,r.jsxs)("div",{className:"relative inline-block w-full text-sm border",children:[(0,r.jsxs)("button",{className:"peer w-full text-left px-4 pr-2 py-2 bg-white text-gray-700 focus:outline-none",onClick:()=>j(!p),children:[(0,r.jsx)("span",{children:h?"".concat(h.fullName,", ").concat(h.area,", ").concat(h.city,", ").concat(h.state):"Select Address"}),(0,r.jsx)("svg",{className:"w-5 h-5 inline float-right transition-transform duration-200 ".concat(p?"rotate-0":"-rotate-90"),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"#6B7280",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),p&&(0,r.jsxs)("ul",{className:"absolute w-full bg-white border shadow-md mt-1 z-10 py-1.5",children:[g.map((e,s)=>(0,r.jsxs)("li",{className:"px-4 py-2 hover:bg-gray-500/10 cursor-pointer",onClick:()=>{u(e),j(!1)},children:[e.fullName,", ",e.area,", ",e.city,", ",e.state]},s)),(0,r.jsx)("li",{onClick:()=>s.push("/add-address"),className:"px-4 py-2 hover:bg-gray-500/10 cursor-pointer text-center",children:"+ Add New Address"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-base font-medium uppercase text-gray-600 block mb-2",children:"Promo Code"}),(0,r.jsxs)("div",{className:"flex flex-col items-start gap-3",children:[(0,r.jsx)("input",{type:"text",placeholder:"Enter promo code",className:"flex-grow w-full outline-none p-2.5 text-gray-600 border"}),(0,r.jsx)("button",{className:"bg-orange-600 text-white px-9 py-2 hover:bg-orange-700",children:"Apply"})]})]}),(0,r.jsx)("hr",{className:"border-gray-500/30 my-5"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between text-base font-medium",children:[(0,r.jsxs)("p",{className:"uppercase text-gray-600",children:["Items ",t()]}),(0,r.jsxs)("p",{className:"text-gray-800",children:[e,l()]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("p",{className:"text-gray-600",children:"Shipping Fee"}),(0,r.jsx)("p",{className:"font-medium text-gray-800",children:"Free"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("p",{className:"text-gray-600",children:"Tax (2%)"}),(0,r.jsxs)("p",{className:"font-medium text-gray-800",children:[e,Math.floor(.02*l())]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-lg md:text-xl font-medium border-t pt-3",children:[(0,r.jsx)("p",{children:"Total"}),(0,r.jsxs)("p",{children:[e,l()+Math.floor(.02*l())]})]})]})]}),(0,r.jsx)("button",{onClick:f,className:"w-full bg-orange-600 text-white py-3 mt-5 hover:bg-orange-700",children:"Place Order"})]})};var o=t(5239),x=t(9682);let m=()=>{let{products:e,router:s,cartItems:t,addToCart:a,updateCartQuantity:n,getCartCount:i}=(0,c.U)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.A,{}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-10 px-6 md:px-16 lg:px-32 pt-14 mb-20",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8 border-b border-gray-500/30 pb-6",children:[(0,r.jsxs)("p",{className:"text-2xl md:text-3xl text-gray-500",children:["Your ",(0,r.jsx)("span",{className:"font-medium text-orange-600",children:"Cart"})]}),(0,r.jsxs)("p",{className:"text-lg md:text-xl text-gray-500/80",children:[i()," Items"]})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full table-auto",children:[(0,r.jsx)("thead",{className:"text-left",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"text-nowrap pb-6 md:px-4 px-1 text-gray-600 font-medium",children:"Product Details"}),(0,r.jsx)("th",{className:"pb-6 md:px-4 px-1 text-gray-600 font-medium",children:"Price"}),(0,r.jsx)("th",{className:"pb-6 md:px-4 px-1 text-gray-600 font-medium",children:"Quantity"}),(0,r.jsx)("th",{className:"pb-6 md:px-4 px-1 text-gray-600 font-medium",children:"Subtotal"})]})}),(0,r.jsx)("tbody",{children:Object.keys(t).map(s=>{let c=e.find(e=>e._id===s);return!c||t[s]<=0?null:(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{className:"flex items-center gap-4 py-4 md:px-4 px-1",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"rounded-lg overflow-hidden bg-gray-500/10 p-2",children:(0,r.jsx)(o.default,{src:c.image[0],alt:c.name,className:"w-16 h-auto object-cover mix-blend-multiply",width:1280,height:720})}),(0,r.jsx)("button",{className:"md:hidden text-xs text-orange-600 mt-1",onClick:()=>n(c._id,0),children:"Remove"})]}),(0,r.jsxs)("div",{className:"text-sm hidden md:block",children:[(0,r.jsx)("p",{className:"text-gray-800",children:c.name}),(0,r.jsx)("button",{className:"text-xs text-orange-600 mt-1",onClick:()=>n(c._id,0),children:"Remove"})]})]}),(0,r.jsxs)("td",{className:"py-4 md:px-4 px-1 text-gray-600",children:["$",c.offerPrice]}),(0,r.jsx)("td",{className:"py-4 md:px-4 px-1",children:(0,r.jsxs)("div",{className:"flex items-center md:gap-2 gap-1",children:[(0,r.jsx)("button",{onClick:()=>n(c._id,t[s]-1),children:(0,r.jsx)(o.default,{src:l.mY.decrease_arrow,alt:"decrease_arrow",className:"w-4 h-4"})}),(0,r.jsx)("input",{onChange:e=>n(c._id,Number(e.target.value)),type:"number",value:t[s],className:"w-8 border text-center appearance-none"}),(0,r.jsx)("button",{onClick:()=>a(c._id),children:(0,r.jsx)(o.default,{src:l.mY.increase_arrow,alt:"increase_arrow",className:"w-4 h-4"})})]})}),(0,r.jsxs)("td",{className:"py-4 md:px-4 px-1 text-gray-600",children:["$",(c.offerPrice*t[s]).toFixed(2)]})]},s)})})]})}),(0,r.jsxs)("button",{onClick:()=>s.push("/all-products"),className:"group flex items-center mt-6 gap-2 text-orange-600",children:[(0,r.jsx)(o.default,{className:"group-hover:-translate-x-1 transition",src:l.mY.arrow_right_icon_colored,alt:"arrow_right_icon_colored"}),"Continue Shopping"]})]}),(0,r.jsx)(d,{})]})]})}},9119:(e,s,t)=>{Promise.resolve().then(t.bind(t,140))},9682:(e,s,t)=>{"use strict";t.d(s,{A:()=>o});var r=t(5155);t(2115);var a=t(4901),l=t(2619),c=t.n(l),n=t(9111),i=t(5239),d=t(5419);let o=()=>{let{isSeller:e,router:s,user:t}=(0,n.U)(),{openSignIn:l}=(0,d.ho)();return(0,r.jsxs)("nav",{className:"flex items-center justify-between px-6 md:px-16 lg:px-32 py-3 border-b border-gray-300 text-gray-700",children:[(0,r.jsx)(i.default,{className:"cursor-pointer w-28 md:w-32",onClick:()=>s.push("/"),src:a.mY.logo,alt:"logo"}),(0,r.jsxs)("div",{className:"flex items-center gap-4 lg:gap-8 max-md:hidden",children:[(0,r.jsx)(c(),{href:"/",className:"hover:text-gray-900 transition",children:"Home"}),(0,r.jsx)(c(),{href:"/all-products",className:"hover:text-gray-900 transition",children:"Shop"}),(0,r.jsx)(c(),{href:"/",className:"hover:text-gray-900 transition",children:"About Us"}),(0,r.jsx)(c(),{href:"/",className:"hover:text-gray-900 transition",children:"Contact"}),e&&(0,r.jsx)("button",{onClick:()=>s.push("/seller"),className:"text-xs border px-4 py-1.5 rounded-full",children:"Seller Dashboard"})]}),(0,r.jsxs)("ul",{className:"hidden md:flex items-center gap-4 ",children:[(0,r.jsx)(i.default,{className:"w-4 h-4",src:a.mY.search_icon,alt:"search icon"}),t?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(d.uF,{children:[(0,r.jsx)(d.uF.MenuItems,{children:(0,r.jsx)(d.uF.Action,{label:"Cart",labelIcon:(0,r.jsx)(a.Kj,{}),onClick:()=>s.push("/cart")})}),(0,r.jsx)(d.uF.MenuItems,{children:(0,r.jsx)(d.uF.Action,{label:"My Orders",labelIcon:(0,r.jsx)(a.UH,{}),onClick:()=>s.push("/my-orders")})})]})}):(0,r.jsxs)("button",{onClick:l,className:"flex items-center gap-2 hover:text-gray-900 transition",children:[(0,r.jsx)(i.default,{src:a.mY.user_icon,alt:"user icon"}),"Account"]})]}),(0,r.jsxs)("div",{className:"flex items-center md:hidden gap-3",children:[e&&(0,r.jsx)("button",{onClick:()=>s.push("/seller"),className:"text-xs border px-4 py-1.5 rounded-full",children:"Seller Dashboard"}),t?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(d.uF,{children:[(0,r.jsx)(d.uF.MenuItems,{children:(0,r.jsx)(d.uF.Action,{label:"Home",labelIcon:(0,r.jsx)(a.fA,{}),onClick:()=>s.push("/")})}),(0,r.jsx)(d.uF.MenuItems,{children:(0,r.jsx)(d.uF.Action,{label:"Products",labelIcon:(0,r.jsx)(a.Fn,{}),onClick:()=>s.push("/all-products")})}),(0,r.jsx)(d.uF.MenuItems,{children:(0,r.jsx)(d.uF.Action,{label:"Cart",labelIcon:(0,r.jsx)(a.Kj,{}),onClick:()=>s.push("/cart")})}),(0,r.jsx)(d.uF.MenuItems,{children:(0,r.jsx)(d.uF.Action,{label:"My Orders",labelIcon:(0,r.jsx)(a.UH,{}),onClick:()=>s.push("/my-orders")})})]})}):(0,r.jsxs)("button",{onClick:l,className:"flex items-center gap-2 hover:text-gray-900 transition",children:[(0,r.jsx)(i.default,{src:a.mY.user_icon,alt:"user icon"}),"Account"]})]})]})}}},e=>{e.O(0,[548,239,619,555,441,255,358],()=>e(e.s=9119)),_N_E=e.O()}]);