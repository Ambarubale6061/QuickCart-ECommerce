(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1290:()=>{},2270:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});var a=t(926);let s=(0,a.createServerReference)("7f0d9d3a1e27f2b91b8b9406fd2dd77751c95723e2",a.callServer,void 0,a.findSourceMapURL,"detectKeylessEnvDriftAction")},3224:(e,r,t)=>{"use strict";t.d(r,{y:()=>s});var a=t(926);let s=(0,a.createServerReference)("7f6285bd1ae77b380cd91f06d0425447bb9ae15aea",a.callServer,void 0,a.findSourceMapURL,"invalidateCacheAction")},4292:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,1290,23)),Promise.resolve().then(t.bind(t,9111)),Promise.resolve().then(t.bind(t,9309)),Promise.resolve().then(t.bind(t,8543)),Promise.resolve().then(t.bind(t,2004)),Promise.resolve().then(t.bind(t,3618)),Promise.resolve().then(t.bind(t,7471)),Promise.resolve().then(t.bind(t,1526)),Promise.resolve().then(t.t.bind(t,6997,23)),Promise.resolve().then(t.bind(t,2663))},9111:(e,r,t)=>{"use strict";t.d(r,{AppContextProvider:()=>h,U:()=>u});var a=t(5155),s=t(5419),o=t(7471),i=t(5125),c=t(63),n=t(2115),d=t(2663);let l=(0,n.createContext)(),u=()=>(0,n.useContext)(l),h=e=>{let r=(0,c.useRouter)(),{user:t}=(0,s.Jd)(),{getToken:u}=(0,o.d)(),[h,f]=(0,n.useState)([]),[v,A]=(0,n.useState)(!1),[b,y]=(0,n.useState)(!1),[m,p]=(0,n.useState)({}),P=async()=>{try{let{data:e}=await i.A.get("/api/product/list");e.success?f(e.products):d.Ay.error(e.message)}catch(e){d.Ay.error(e.message)}},C=async()=>{try{"seller"===t.publicMetadata.role&&y(!0);let e=await u(),{data:r}=await i.A.get("/api/user/data",{headers:{Authorization:"Bearer ".concat(e)}});r.success?(A(r.user),p(r.user.cartItems)):d.Ay.error(r.message)}catch(e){d.Ay.error(e.message)}},g=async e=>{if(!t)return(0,d.Ay)("Please login",{icon:"⚠️"});let r=structuredClone(m);if(r[e]?r[e]+=1:r[e]=1,p(r),t)try{let e=await u();await i.A.post("/api/cart/update",{cartData:r},{headers:{Authorization:"Bearer ".concat(e)}}),d.Ay.success("Item added to cart")}catch(e){d.Ay.error(e.message)}},S=async(e,r)=>{let a=structuredClone(m);if(0===r?delete a[e]:a[e]=r,p(a),t)try{let e=await u();await i.A.post("/api/cart/update",{cartData:a},{headers:{Authorization:"Bearer ".concat(e)}}),d.Ay.success("Cart Updated")}catch(e){d.Ay.error(e.message)}};return(0,n.useEffect)(()=>{P()},[]),(0,n.useEffect)(()=>{t&&C()},[t]),(0,a.jsx)(l.Provider,{value:{user:t,getToken:u,currency:"$",router:r,isSeller:b,setIsSeller:y,userData:v,fetchUserData:C,products:h,fetchProductData:P,cartItems:m,setCartItems:p,addToCart:g,updateCartQuantity:S,getCartCount:()=>{let e=0;for(let r in m)m[r]>0&&(e+=m[r]);return e},getCartAmount:()=>{let e=0;for(let r in m){let t=h.find(e=>e._id===r);m[r]>0&&(e+=t.offerPrice*m[r])}return Math.floor(100*e)/100}},children:e.children})}}},e=>{e.O(0,[769,548,687,441,255,358],()=>e(e.s=4292)),_N_E=e.O()}]);